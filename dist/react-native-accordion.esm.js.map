{"version":3,"file":"react-native-accordion.esm.js","sources":["../src/Accordion.tsx"],"sourcesContent":["import React, {useEffect, useState, memo, ReactElement} from 'react';\nimport {\n  Text,\n  FlatList,\n  LayoutAnimation,\n  TouchableOpacity,\n  StyleSheet,\n  Animated,\n  Easing,\n  ImageStyle,\n  TextStyle,\n  ViewStyle\n} from 'react-native';\n// import {AccordionProps} from './types';\n\ninterface ItemInfo<ItemT> {\n  item: ReactElement<ItemT>;\n  index: number;\n}\n\ntype Item<ItemT> = (info: ItemInfo<ItemT>) => ReactElement | null;\ntype animationPreset = {\n  SPRING: 'spring';\n  EASEINEASEOUT: 'easeInEaseOut';\n  LINEAR: 'linear';\n};\n\n/**\n * @param displayedIconArrowDown Show to display icons arrowDown, default false. Not obligatory\n * @param containerStyle General style for display, not obligatory\n * @param items Array of elements to display\n * @param itemStyle Style for an array element, not obligatory\n * @param titleStyle Style for an title array element, not obligatory\n * @param isOpenFirstItem Boolean value is opening first item, default true. Not obligatory\n * @param styleIconArrowDown Style for icon, not obligatory\n * @param activeOpacity Click opacity, default 0.7. Not obligatory\n * @param typeAnimation Animation type for open item, default easeInEaseOut. Not obligatory\n * @param animatedContainerStyle style for animation container. Not obligatory\n * @param titleStyle style for item title. Not obligatory\n */\n\ninterface AccordionProps {\n  containerStyle?: ViewStyle;\n  isOpenFirstItem?: boolean;\n  items: Array<Item<ReactElement>>;\n  itemStyle?: ViewStyle;\n  displayedIconArrowDown?: boolean;\n  styleIconArrowDown?: ImageStyle;\n  activeOpacity?: number;\n  typeAnimation?: string | animationPreset;\n  animatedContainerStyle?: ViewStyle;\n  titleStyle?: TextStyle;\n}\n\nconst keyExtractor = (index: number) => index;\n\nconst Accordion = ({\n  displayedIconArrowDown,\n  containerStyle,\n  items,\n  itemStyle,\n  isOpenFirstItem,\n  styleIconArrowDown,\n  activeOpacity,\n  typeAnimation,\n  animatedContainerStyle,\n  titleStyle,\n}: AccordionProps) => {\n  const [currentIndex, setCurrentIndex] = useState<number | null>(null);\n  const configAnimation = () => {\n    return LayoutAnimation.configureNext(\n      // @ts-ignore\n      LayoutAnimation.Presets[typeAnimation],\n    );\n  };\n  const iconArrow = require('./icons/arrowdown.png');\n  const iconChangeValue = new Animated.Value(1);\n\n  const spin = iconChangeValue.interpolate({\n    inputRange: [0, 1],\n    outputRange: ['0deg', '180deg'],\n  });\n  const iconChange = () => {\n    Animated.timing(iconChangeValue, {\n      toValue: 1,\n      duration: 2000,\n      easing: Easing.linear,\n      useNativeDriver: false,\n    }).start();\n  };\n  const onItemPress = (key: number) => {\n    iconChange();\n    setCurrentIndex(key === currentIndex ? null : key);\n    configAnimation();\n  };\n\n  useEffect(() => {\n    if (isOpenFirstItem) {\n      onItemPress(0);\n    }\n  }, [isOpenFirstItem]);\n\n  const renderItem = (data: any) => {\n    const {item, index} = data;\n    const key = keyExtractor(index);\n    return (\n      <>\n        <TouchableOpacity\n          onPress={() => onItemPress(key)}\n          activeOpacity={activeOpacity}\n          key={key}\n          style={[\n            itemStyle,\n            styles.itemStyle,\n            displayedIconArrowDown && styles.isEnableIcon,\n          ]}>\n          {item?.title && (\n            <Text style={titleStyle}>{item.title}</Text>\n          )}\n          {displayedIconArrowDown && (\n            <Animated.Image\n              source={iconArrow}\n              style={[\n                key === currentIndex && {transform: [{rotate: spin}]},\n                styleIconArrowDown,\n                styles.styleIconArrowDown,\n              ]}\n            />\n          )}\n        </TouchableOpacity>\n        {item.content && (\n          <Animated.View style={(styles.animatedBody, animatedContainerStyle)}>\n            {key === currentIndex && item?.content}\n          </Animated.View>\n        )}\n      </>\n    );\n  };\n  return (\n    <FlatList\n      data={items}\n      style={containerStyle && styles.container}\n      renderItem={renderItem}\n      keyExtractor={item => item.toString()}\n    />\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  itemStyle: {\n    paddingHorizontal: 14,\n    borderTopWidth: 0.5,\n    paddingVertical: 8,\n  },\n  animatedBody: {\n    padding: 8,\n  },\n  isEnableIcon: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  styleIconArrowDown: {\n    height: 18,\n    width: 18,\n  },\n});\nexport default memo(Accordion);\n"],"names":["keyExtractor","index","Accordion","_ref","displayedIconArrowDown","containerStyle","items","itemStyle","isOpenFirstItem","styleIconArrowDown","activeOpacity","typeAnimation","animatedContainerStyle","titleStyle","_useState","useState","currentIndex","setCurrentIndex","configAnimation","LayoutAnimation","configureNext","Presets","iconArrow","require","iconChangeValue","Animated","Value","spin","interpolate","inputRange","outputRange","iconChange","timing","toValue","duration","easing","Easing","linear","useNativeDriver","start","onItemPress","key","useEffect","renderItem","data","item","React","TouchableOpacity","onPress","style","styles","isEnableIcon","title","Text","Image","source","transform","rotate","content","View","FlatList","container","toString","StyleSheet","create","flex","paddingHorizontal","borderTopWidth","paddingVertical","animatedBody","padding","flexDirection","justifyContent","height","width","memo"],"mappings":"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"}